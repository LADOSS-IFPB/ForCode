package br.edu.service.forcode.util;

import br.edu.commons.forcode.entities.ForCodeError;
import br.edu.commons.forcode.entities.User;
import br.edu.service.forcode.database.dao.UserDAO;

public class ForCodeValidator {
	public static ForCodeError validate(User user) {
		UserDAO userDao = new UserDAO();

		if (userDao.getByUsername(user.getUsername()) != null) {
			ForCodeError error = ErrorFactory
					.getErrorFromIndex(ErrorFactory.DUPLICATE_USERNAME);
			error.setMessage(error.getMessage() + " '" + user.getUsername() + "'");
			
			return error;
		}
		
		if (userDao.getByEmail(user.getEmail()) != null) {
			ForCodeError error = ErrorFactory
					.getErrorFromIndex(ErrorFactory.DUPLICATE_EMAIL);
			error.setMessage(error.getMessage() + " '" + user.getEmail() + "'");
			
			return error;
		}
		
		return null;
	}
}
